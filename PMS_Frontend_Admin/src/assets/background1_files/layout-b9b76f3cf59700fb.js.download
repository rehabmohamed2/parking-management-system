(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7523],{19457:function(e,t,n){Promise.resolve().then(n.bind(n,51664)),Promise.resolve().then(n.bind(n,53603))},45885:function(e,t,n){"use strict";n.d(t,{Gs:function(){return l},Ni:function(){return u},Ox:function(){return i},a3:function(){return c}});var o=n(74101),r=n(79122),a=n(42787);let i=async(e,t)=>{let n=(0,r.B5)(new URL("".concat(o.publicRuntimeConfig.apiUrl,"user/favorites")),e),i=await (0,a.BB)({url:n,options:{method:"GET",credentials:"same-origin",headers:{authorization:"Token ".concat(t),"Content-Type":"application/json"}}});return await i.json()},c=async(e,t,n,o)=>s(e,t,n,"POST",o),u=async(e,t,n,o)=>s(e,t,n,"DELETE",o),s=async(e,t,n,o,r)=>{let i=await (0,a.BB)({url:f("user/favorites",t,r),options:{method:o,body:"gif_id=".concat(e),headers:{cookie:n,Accept:"application/json",Authorization:"Token ".concat(t),"Content-Type":"application/x-www-form-urlencoded; charset=utf-8"}}});return await i.json()},l=async(e,t,n)=>{let o=await (0,a.BB)({url:f("user/favorites/statuses",t,n),options:{method:"POST",headers:{Authorization:"Token ".concat(t),"Content-Type":"application/json"},body:JSON.stringify({gif_ids:[e]})}});return(await o.json()).data.length>0};function f(e,t,n){let a;let i="".concat(o.publicRuntimeConfig.apiUrl).concat(e);try{a=new URL(i)}catch(e){throw console.error("Invalid URL:",i),e}return(0,r.B5)(a,{api_key:n,access_token:t})}},57019:function(e,t,n){"use strict";n.d(t,{d:function(){return a},g:function(){return r}});var o=n(27573);let r=(0,n(7653).createContext)({channel:void 0}),a=e=>{let{channel:t,children:n}=e;return(0,o.jsx)(r.Provider,{value:{channel:t},children:n})}},14789:function(e,t,n){"use strict";n.d(t,{c5:function(){return l},k1:function(){return w},xL:function(){return d}});var o=n(27573),r=n(45885),a=n(79122),i=n(7653),c=n(6928);let u=(0,i.createContext)({favorites:[],setFavorites:()=>{},hasChecked:[],setHasChecked:()=>{}}),s=e=>{let{user:t}=(0,i.useContext)(c.Z),n=(0,i.useState)([]),[o,r]=(0,i.useState)(!1),u=(0,i.useRef)(!1),[s,l]=n,d=(0,a.vl)();return(0,i.useEffect)(()=>{if(t){if(!u.current){u.current=!0;let n=window.localStorage.getItem(e);f(n?JSON.parse(n):[],t,e,d)}}else if(o)try{window.localStorage.setItem(e,JSON.stringify(Array.from(new Set(s))))}catch(t){console.error("failed to set ".concat(e," in local"))}else try{let t=window.localStorage.getItem(e);l(t?JSON.parse(t):[]),r(!0)}catch(e){}},[d,o,e,l,s,t]),n},l=e=>{let{children:t}=e,[n,r]=s("local-favorites"),[a,c]=(0,i.useState)([]);return(0,i.useEffect)(()=>{},[]),(0,o.jsx)(u.Provider,{value:{favorites:n,setFavorites:r,hasChecked:a,setHasChecked:c},children:t})};async function f(e,t,n,o){let a=e[0];if(a)try{setTimeout(async()=>{await (0,r.a3)(a,t.token,document.cookie,o),window.localStorage.setItem(n,JSON.stringify(e.filter(e=>e!==a))),f(e.slice(1),t,n,o)},100)}catch(e){console.error("failed to sync favorite ".concat(a),e)}}function d(e){let{user:t}=(0,i.useContext)(c.Z),n=(0,a.vl)(),{favorites:o,setFavorites:s,hasChecked:l,setHasChecked:f}=(0,i.useContext)(u),d=(0,i.useRef)(!1);if((0,i.useEffect)(()=>{async function o(e){if(t){let o=await (0,r.Gs)(e,t.token,n);s(t=>{let n=t.includes(e);return o&&!n?[...t,e]:!o&&n?t.filter(t=>t!==e):t}),f(t=>[...t,e])}}!e||d.current||l.includes(e)||(d.current=!0,o(e))},[n,l,e,s,f,t]),e)return t?l.includes(e)?o.includes(e):void 0:o.includes(e)}function w(){let{user:e}=(0,i.useContext)(c.Z),t=(0,a.vl)(),{favorites:n,setFavorites:o}=(0,i.useContext)(u);return async function(a){let i=n.includes(a);if(e)return i?i&&(await (0,r.Ni)(a,e.token,document.cookie,t),o(e=>e.filter(e=>e!==a))):(await (0,r.a3)(a,e.token,document.cookie,t),o(e=>[...e,a])),!i;i?o(e=>e.filter(e=>e!==a)):o(e=>[...e,a])}}t.ZP=u},61996:function(e,t,n){"use strict";n.d(t,{Z:function(){return f},t:function(){return d}});var o=n(57019),r=n(53603),a=n(23733),i=n(7653),c=n(91306),u=n(6928);let s=window||{},l={ENABLED:s.DEBUG||s.location&&(0===location.href.indexOf("http://local.giphy.com")||-1!==location.search.indexOf("debug=true")),LEVEL:0,debug:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];l.ENABLED&&l.LEVEL<=0&&console.debug(...t)},info:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];l.ENABLED&&l.LEVEL<=1&&console.info(...t)},warn:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];l.ENABLED&&l.LEVEL<=2&&console.warn(...t)},error:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];l.ENABLED&&l.LEVEL<=3&&console.error(...t)}},f=e=>{e&&(l.debug("trackPageView virtualPageURL: ".concat(e)),window.didomiOnReady.push(()=>{l.debug("SEND: trackPageView virtualPageURL: ".concat(e)),window.dataLayer.push({event:"VirtualPageview",virtualPageURL:e,virtualPageName:e,...(0,a.yU)()})}))},d=()=>{let{channel:e}=(0,i.useContext)(o.g),{deviceType:t}=(0,i.useContext)(r.default),n=(0,a.bM)(),[s,l]=(0,c.Z)("login_type",n.platform||"email"),{user:f,hasFetchedUser:d}=(0,i.useContext)(u.Z);(0,i.useEffect)(()=>{(0,a.wj)({creatorId:e?"".concat(e.id):void 0,creatorName:null==e?void 0:e.user.username})},[e]),(0,i.useEffect)(()=>{if(d){let o=(0,a.PR)();if(f){var e;o={userID:"".concat(f.id),userType:f.is_staff?"staff":f.user_type,loginMethod:n.platform||s,dashboardAnalytics:f.permissions.dashboard_analytics,verifiedStatus:f.is_verified,loggedInStatus:!0,userLanguage:null===(e=navigator)||void 0===e?void 0:e.language,siteType:t}}(0,a.av)(o),n.action&&(l(n.platform),(0,a.u2)({event:"".concat(n.action,"_form_success"),options:{form:{formName:n.action}}})),window.dataLayer=window.dataLayer||[],window.dataLayer.push((0,a.rD)())}},[d])}}},function(e){e.O(0,[1307,3108,6623,9968,2715,1661,772,8146,8742,9970,7522,3920,6612,9887,7702,1073,6566,5341,6873,4322,401,4552,2544,9357,1664,1293,1528,1744],function(){return e(e.s=19457)}),_N_E=e.O()}]);
//# sourceMappingURL=layout-b9b76f3cf59700fb.js.map